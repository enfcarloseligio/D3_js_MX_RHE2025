<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- REEMPLAZAR: Descripci√≥n con el nombre del estado -->
  <meta name="description" content="Visualizaci√≥n interactiva de la distribuci√≥n de enfermeras en el Estado de {{ESTADO}} 2025." />
  
  <meta name="author" content="Secretar√≠a de Salud - Direcci√≥n General de Calidad y Educaci√≥n en Salud - Direcci√≥n de Enfermer√≠a" />
  <meta name="keywords" content="enfermer√≠a, salud, SIARHE, enfermeras, M√©xico, distribuci√≥n, mapa, 2025" />
  
  <!-- REEMPLAZAR: T√≠tulo de la pesta√±a -->
  <title>Distribuci√≥n de Enfermeras en el Estado de {{ESTADO}} - Gobierno de M√©xico</title>

  <!-- Estilos -->
  <link rel="stylesheet" href="../styles.css" />
  <link rel="stylesheet" href="../styles/mapas.css" />

  <!-- Librer√≠as externas -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

  <!-- REEMPLAZAR: Nombre del archivo JS del mapa -->
  <script type="module" src="../scripts/maps/{{archivoJS}}.js"></script>

  <!-- Script para inyectar header, banner y footer -->
  <script src="../scripts/inyectar-layout.js" defer></script>
</head>

<body>
<main>

  <!-- SECCI√ìN PRINCIPAL DEL MAPA -->
  <section class="mapa-entidad">
    <!-- REEMPLAZAR: T√≠tulo H1 con el nombre del estado -->
    <h1>¬øCu√°ntas enfermeras hay en {{ESTADO}} en 2025?</h1>
    
    <!-- REEMPLAZAR: Total de enfermeras y municipios -->
    <p class="bienvenida">
      En el a√±o 2025, el estado de {{ESTADO}} cuenta con un total de <strong>{{TOTAL_ENFERMERAS}}</strong> enfermeras distribuidas en sus {{TOTAL_MUNICIPIOS}} municipios, de acuerdo con datos oficiales del Sistema de Informaci√≥n Administrativa de Recursos Humanos en Enfermer√≠a (SIARHE). Esta cifra refleja los esfuerzos del sistema de salud por garantizar el acceso equitativo a los servicios de enfermer√≠a en toda la entidad.
    </p>

    <!-- REEMPLAZAR: Nombre del estado -->
    <h2>Distribuci√≥n de enfermeras en los municipios de {{ESTADO}}</h2>
    <p>
      A continuaci√≥n se muestra un mapa interactivo que representa la tasa de enfermeras por cada mil habitantes en los municipios de {{ESTADO}}. 
      Utiliza los botones de zoom (+/‚Äì) para acercar o alejar el mapa, y el bot√≥n de reinicio (‚ü≥) para volver a la vista general. Al pasar el cursor sobre cada municipio, podr√°s ver la tasa espec√≠fica de enfermeras por cada mil habitantes.
    </p>

    <!-- REEMPLAZAR: ID del contenedor de mapa con el nombre del archivo JS -->
    <div id="mapa-{{archivoJS}}" class="mapa-wrapper">
      <!-- Aqu√≠ se inyecta el mapa SVG din√°micamente -->
      <div class="zoom-controles"></div>
    </div>

    <p id="nota">
      <em>
        Nota: La tasa se calcula con base en el Censo de Poblaci√≥n y Vivienda 2020 (INEGI) y la Informaci√≥n del SIARHE (28 de enero de 2025).
        <br>Secretar√≠a de Salud. (enero, 2025). Sistema de Informaci√≥n Administrativa de Recursos Humanos en Enfermer√≠a (SIARHE).
      </em>
    </p>

    <!-- Botones para descargar el mapa -->
    <div class="descarga-container">
      <button id="descargar-sin-etiquetas" class="boton">üó∫Ô∏è Descargar üó∫Ô∏è</button>
      <button id="descargar-con-etiquetas" class="boton">üìù Descargar üìù</button>
    </div>
  </section>

  <!-- SECCI√ìN DE TABLA -->
  <!-- REEMPLAZAR: clase con el nombre del archivo JS (opcional) -->
  <section class="tabla-{{archivoJS}}">
    <!-- REEMPLAZAR: Nombre del estado -->
    <h2>Tasa de enfermeras por municipio en {{ESTADO}} (2025)</h2>
    <p>
      Esta tabla presenta un resumen detallado de cada municipio del estado, mostrando el n√∫mero total de enfermeras, su poblaci√≥n y la tasa de enfermeras por cada mil habitantes. Esta informaci√≥n es √∫til para la toma de decisiones en salud p√∫blica, distribuci√≥n de recursos y evaluaci√≥n de cobertura.
    </p>

    <div class="tabla-scroll">
      <div id="tabla-contenido">
        <!-- La tabla se carga con JS -->
      </div>
    </div>

    <div class="descarga-container">
      <button id="descargar-excel" class="boton">üì• Descargar Excel</button>
    </div>
  </section>

</main>

<!-- REEMPLAZAR: nombre del archivo CSV con el de la entidad -->
<script type="module">
  import { generarTablaMunicipios, habilitarDescargaExcel } from '../scripts/utils/tabla-municipios.js';

  generarTablaMunicipios('../data/tasas/tasas-enfermeras-{{archivoJS}}.csv');

  const nombreEntidad = location.pathname.split("/").pop().replace(".html", "");
  habilitarDescargaExcel(`enfermeras-${nombreEntidad}.xlsx`);
</script>

</body>
</html>
