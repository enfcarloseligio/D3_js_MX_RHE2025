<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Visualizaci√≥n interactiva de la distribuci√≥n de enfermeras en el Estado de Nayarit 2025." />
  <meta name="author" content="Secretar√≠a de Salud - Direcci√≥n General de Calidad y Educaci√≥n en Salud - Direcci√≥n de Enfermer√≠a" />
  <meta name="keywords" content="enfermer√≠a, salud, SIARHE, enfermeras, M√©xico, distribuci√≥n, mapa, 2025" />
  <title>SIARHE | Distribuci√≥n de Profesionales de Enfermer√≠a de Nayarit</title>

  <!-- Estilos -->
  <link rel="stylesheet" href="../styles.css" />
  <link rel="stylesheet" href="../styles/mapas.css" />

  <!-- Librer√≠as externas -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

  <!-- Scripts internos -->
  <script type="module" src="../scripts/maps/nayarit.js"></script>
  <script src="../scripts/inyectar-layout.js"></script>
</head>

<body>
<main>

  <!-- SECCI√ìN PRINCIPAL DEL MAPA -->
  <section class="mapa-entidad">
    <h1>¬øCu√°ntas enfermeras hay en Nayarit en <span class="year"></span>?</h1>
    <p class="bienvenida">
      En el a√±o <span class="year"></span>, el estado de Nayarit cuenta con un total de <strong><span id="total-enfermeras"></span> enfermeras</strong> distribuidas en sus 20 municipios, de acuerdo con datos oficiales del Sistema de Informaci√≥n Administrativa de Recursos Humanos en Enfermer√≠a (SIARHE). Este dato es clave para el an√°lisis y planificaci√≥n de los recursos humanos en salud a nivel estatal.
    </p>

    <h2>Distribuci√≥n de enfermeras en los municipios de Nayarit</h2>
    <p>
      A continuaci√≥n se presenta un mapa interactivo que muestra la distribuci√≥n de profesionales de enfermer√≠a por cada mil habitantes en los municipios de Nayarit.
      Utiliza los botones de zoom (+/‚Äì) para acercar o alejar el mapa, el bot√≥n de reinicio (‚ü≥) para volver a la vista general y el √≠cono de la casa üè† para regresar al mapa de la Rep√∫blica Mexicana.
      Al colocar el cursor sobre cada municipio, podr√°s consultar la tasa espec√≠fica de profesionales de enfermer√≠a por cada mil habitantes. Esta informaci√≥n permite identificar con precisi√≥n las regiones con mayor o menor cobertura, y sirve de apoyo para la planificaci√≥n de recursos humanos en salud a nivel local.
    </p>

    <div id="mapa-nayarit" class="mapa-wrapper">
      <!-- Aqu√≠ se inyecta el mapa SVG din√°micamente -->
      <div class="zoom-controles"></div>
    </div>

    <!-- NOTA Y FUENTE -->
    <p id="nota">
      <strong>Nota:</strong>
      <em>
        La tasa se calcula con base en el Censo de Poblaci√≥n y Vivienda 2020 (INEGI) y en los registros del Sistema de Informaci√≥n Administrativa de Recursos Humanos en Enfermer√≠a (SIARHE), con corte estad√≠stico al 28 de enero de <span class="year"></span>.
      </em>
      <br>
      <strong>Fuente:</strong>
      <em>
        Secretar√≠a de Salud. (enero, <span class="year"></span>). Sistema de Informaci√≥n Administrativa de Recursos Humanos en Enfermer√≠a (SIARHE).
      </em>
    </p>

    <!-- BOTONES DE DESCARGA DEL MAPA -->
    <div class="descarga-container">
      <button id="descargar-sin-etiquetas" class="boton">üó∫Ô∏è Descargar üó∫Ô∏è</button>
      <button id="descargar-con-etiquetas" class="boton">üìù Descargar üìù</button>
    </div>
  </section>

  <!-- SECCI√ìN DE TABLA DIN√ÅMICA -->
  <section class="tabla-nayarit">
    <h2>Tasa de enfermeras por municipio en Nayarit (<span class="year"></span>)</h2>
    <p>
      Esta tabla presenta un resumen detallado de cada municipio del estado, mostrando el n√∫mero total de enfermeras, su poblaci√≥n y la tasa de enfermeras por cada mil habitantes. Esta informaci√≥n es √∫til para la toma de decisiones en salud p√∫blica, distribuci√≥n de recursos y evaluaci√≥n de cobertura.
    </p>

    <div class="tabla-scroll">
      <div id="tabla-contenido">
        <!-- Tabla cargada din√°micamente con JS -->
      </div>
    </div>

    <div class="descarga-container">
      <button id="descargar-excel" class="boton">üì• Descargar Excel</button>
    </div>
  </section>

</main>

<!-- CARGA DE DATOS Y EXPORTACI√ìN -->
<script type="module">
  import { generarTablaMunicipios, habilitarDescargaExcel } from '../scripts/utils/tabla-municipios.js';

  generarTablaMunicipios('../data/rate/nayarit.csv');

  const nombreEntidad = location.pathname.split("/").pop().replace(".html", "");
  habilitarDescargaExcel(`enfermeras-${nombreEntidad}.xlsx`);
</script>

<!-- SCRIPT PARA A√ëO DIN√ÅMICO -->
<script>
  const currentYear = new Date().getFullYear();
  document.querySelectorAll(".year").forEach(el => el.textContent = currentYear);
</script>

</body>
</html>
